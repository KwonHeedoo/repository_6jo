DROP TABLE ADDITIONAL_INFO;
DROP TABLE EDUCATION;
DROP TABLE EXPERIENCE;
DROP TABLE COVERLETTER;
DROP TABLE RESUME;
DROP TABLE MYWORD;
DROP TABLE WORD;
DROP TABLE SCHEDULE;
DROP TABLE MATCHING_COMMENT;
DROP TABLE MATCHING_BOARD;
DROP TABLE NOTICE_COMMENT;
DROP TABLE NOTICE_BOARD;
DROP TABLE APPRAISE_COMMENT;
DROP TABLE APPRAISE_BOARD;

DROP TABLE EXCEPTIONWORD;
DROP TABLE VISITOR;
DROP TABLE REPORT;
DROP TABLE SANCTION;
DROP TABLE MESSAGE;
DROP TABLE INTERVIEW_DATA;
DROP TABLE INTERVIEW_QUESTION;
DROP TABLE USERLIST;

DROP sequence MYWORD_SEQ;
DROP sequence RESUME_SEQ;
DROP sequence SCHEDULE_SEQ;
DROP sequence WORDNUM_SEQ;
DROP sequence MATCHING_BOARD_SEQ;
DROP sequence MC_COMMENTNUM_SEQ;
DROP sequence MC_GROUPNUM_SEQ;
DROP sequence NOTICE_BOARD_SEQ;
DROP sequence NC_COMMENTNUM_SEQ;
DROP sequence NC_GROUPNUM_SEQ;
DROP sequence APPRAISE_BOARD_SEQ;
DROP sequence AC_COMMENTNUM_SEQ;
DROP sequence AC_GROUPNUM_SEQ;
DROP sequence REPORT_SEQ;
DROP sequence SANCTION_SEQ;
DROP sequence MESSAGE_SEQ;
DROP sequence DATA_SEQ;


-- <------------------------- 유저 -------------------------->
-- 유저 TABLE 
CREATE TABLE USERLIST (
	"USERID" VARCHAR2(20)
	, "USERPWD" VARCHAR2(20)
	, "NICKNAME" VARCHAR2(50)
	, "EMAIL" VARCHAR2(50)
	, "BIRTHDATE" DATE
	, "USERNAME" VARCHAR2(25)
	, "USERTYPE" VARCHAR2(10) DEFAULT 'user'
	, "REGDATE" DATE DEFAULT SYSDATE
	, "LASTDATE" DATE
	, "ATTENDNUM" NUMBER DEFAULT 1
	, "IMGFILEPATH" VARCHAR2(100)
	, PRIMARY KEY ("USERID")
);
    
    
-- <------------------------- 이력서 -------------------------->
-- 이력서 TABLE 
CREATE TABLE RESUME (
	"RESUME_NO" VARCHAR2(20)
	, "USERID" VARCHAR2(20) NOT NULL ENABLE
	, "TITLE" VARCHAR2(50) DEFAULT 'no-title'
	, "REGDATE" DATE DEFAULT sysdate
	, "DEADLINE" TIMESTAMP (6)
	, "PHONE" VARCHAR2(20) DEFAULT 'none'
	, "ADDRESS" VARCHAR2(100)
	, "EMAIL" VARCHAR2(50)
	, "USERNAME" VARCHAR2(20)
	, PRIMARY KEY ("RESUME_NO")
	, CONSTRAINT "UNIQUE_CONSTRAINT" UNIQUE ("USERID", "TITLE")
	, CONSTRAINT "RE_FK" FOREIGN KEY ("USERID") REFERENCES "USERLIST" ("USERID") ON DELETE CASCADE ENABLE
);

-- 이력서 Sequence  
CREATE SEQUENCE  RESUME_SEQ;

-- 이력서 추가 정보 TABLE 
CREATE TABLE ADDITIONAL_INFO (
	"RESUME_NO" VARCHAR2(20) NOT NULL ENABLE
	, "INFO_TITLE" VARCHAR2(50) DEFAULT ''
	, "DETAIL" VARCHAR2(100)
	, "REMARKS" VARCHAR2(100)
	, "INFO_DATE" DATE
	, CONSTRAINT "ADD_FK" FOREIGN KEY ("RESUME_NO") REFERENCES "RESUME" ("RESUME_NO") ON DELETE CASCADE ENABLE
);

-- 이력서 추가 정보_교육 TABLE 
CREATE TABLE EDUCATION (
	"RESUME_NO" VARCHAR2(20 ) NOT NULL ENABLE
	, "SCHOOL_NAME" VARCHAR2(50 ) 
	, "DEGREE_LEVEL" VARCHAR2(50 )
	, "ENTER_DATE" DATE
	, "GRADUATE_DATE" DATE
	, "MAJOR" VARCHAR2(50 ) DEFAULT ''
	, CONSTRAINT "EDU_FK" FOREIGN KEY ("RESUME_NO") REFERENCES "RESUME" ("RESUME_NO") ON DELETE CASCADE ENABLE
);

-- 이력서 추가 정보_경험 TABLE 
CREATE TABLE EXPERIENCE (
	"RESUME_NO" VARCHAR2(20 ) NOT NULL ENABLE
	, "COMPANY_NAME" VARCHAR2(50 ) NOT NULL ENABLE
	, "JOB_DESCRIPTION" VARCHAR2(100 )
	, "START_DATE" DATE
	, "END_DATE" DATE
	, CONSTRAINT "EX_FK" FOREIGN KEY ("RESUME_NO") REFERENCES "RESUME" ("RESUME_NO") ON DELETE CASCADE ENABLE
);
   
CREATE TABLE COVERLETTER(   
	"TITLE" VARCHAR2(50 ) NOT NULL
	, "MAINTEXT" VARCHAR2(2000 ) NOT NULL 
	, "REGDATE" DATE DEFAULT sysdate
	, "ADDRESS" VARCHAR2(500)
	, "PHONE" VARCHAR2(50)
	, "EMAIL" VARCHAR2(100) 
	, "USERID" VARCHAR2(20) NOT NULL
	, "USERNAME" VARCHAR2(20)
	, CONSTRAINT "COVERLETTER_FK" FOREIGN KEY ("USERID") REFERENCES "USERLIST" ("USERID") ON DELETE CASCADE ENABLE
	, CONSTRAINT "COVERLETTER_PK" PRIMARY KEY ("TITLE", "USERID")
);

   

-- <------------------------- 단어 -------------------------->
-- 내 단어 TABLE 
CREATE TABLE MYWORD (
	"USERID" VARCHAR2(20 )
	, "WORD" VARCHAR2(30 ) NOT NULL ENABLE
	, "MEANINGK" VARCHAR2(50 )
	, "WORDTYPE" VARCHAR2(10 ) DEFAULT 'user'
	, "MYWORD_NO" VARCHAR2(20 ) NOT NULL ENABLE
	, CONSTRAINT "MYWORD_PK" PRIMARY KEY ("MYWORD_NO")
	, CONSTRAINT "FK_MYWORD" FOREIGN KEY ("USERID") REFERENCES "USERLIST" ("USERID") ON DELETE CASCADE ENABLE
);

-- 내 단어 Sequence   
CREATE SEQUENCE  MYWORD_SEQ;
   
CREATE TABLE WORD (
	"WORD" VARCHAR2(30 ) NOT NULL ENABLE
	, "WORDNUM" NUMBER
	, "MEANINGK" VARCHAR2(50 ) NOT NULL ENABLE
	, "WORDLEVEL" NUMBER DEFAULT 1
	, PRIMARY KEY ("WORDNUM")
);

-- 단어 Sequence  
CREATE SEQUENCE  WORDNUM_SEQ;  

CREATE TABLE SCHEDULE (
	"USERID" VARCHAR2(20 )
	, "TITLE" VARCHAR2(60 ) NOT NULL ENABLE
	, "ALLDAY" VARCHAR2(10 )
	, "STARTDATE" VARCHAR2(20 )
	, "ENDDATE" VARCHAR2(20 )
	, "S_ID" VARCHAR2(20 )
	, PRIMARY KEY ("S_ID")
	, CONSTRAINT "SCHEDULE_U_FK" FOREIGN KEY ("USERID") REFERENCES "USERLIST" ("USERID") ON DELETE CASCADE ENABLE
);

-- 스케쥴 Sequence  
CREATE SEQUENCE  SCHEDULE_SEQ;

-- <------------------------- 1:1 화상 채팅 -------------------------->
-- 1:1 화상 채팅 매칭 게시물 TABLE
CREATE TABLE MATCHING_BOARD (
	BOARDNUM NUMBER PRIMARY KEY   -- 게시물 번호
	, USERID VARCHAR2(20) NOT NULL      -- 게시물 작성자
	, NICKNAME VARCHAR2(50) NOT NULL   -- 게시물 작성자 닉네임
	, TITLE VARCHAR2(100) NOT NULL      -- 제목
	, CONTENTS VARCHAR2(2000) NOT NULL   -- 내용
	, HITCOUNT NUMBER DEFAULT 0      -- 조회수
	, REGDATE DATE DEFAULT SYSDATE   -- 최종 수정일
	, STATUS NUMBER DEFAULT 0 NOT NULL CONSTRAINT MB_STATUS_CK CHECK(STATUS IN(0, 1))   -- 공지 여부(1이면 공지 / 0이면 일반게시물)
	, MATCHINGID VARCHAR2(20)      -- 매칭 ID
	, APPOINTEDTIME TIMESTAMP NOT NULL   -- 매칭 시간
	, ROOMNUM VARCHAR2(20) UNIQUE   -- 채팅룸 번호
	, CONSTRAINT "MB_FK" FOREIGN KEY ("USERID") REFERENCES "USERLIST" ("USERID") ON DELETE CASCADE ENABLE
);

-- 1:1 화상 채팅 매칭 게시물 번호 Sequence
CREATE SEQUENCE MATCHING_BOARD_SEQ;

-- 1:1 화상 채팅 매칭 게시물 코멘트 TABLE 
CREATE TABLE MATCHING_COMMENT (
	"COMMENTNUM" NUMBER   -- 코멘트 번호
	, "USERID" VARCHAR2(20 ) NOT NULL ENABLE    -- 코멘트 작성자
	, "NICKNAME" VARCHAR2(50 ) NOT NULL ENABLE   -- 코멘트 작성자 닉네임
	, "BOARDNUM" NUMBER NOT NULL ENABLE   -- 코멘트가 있는 게시물 번호
	, "COMMENTS" VARCHAR2(500 ) NOT NULL ENABLE   -- 코멘트 내용
	, "REGDATE" DATE DEFAULT SYSDATE   -- 최종 수정일
	, "PARENTID" VARCHAR2(20 )      -- 부모 코멘트의 작성자 ID
	, "PARENTNICK" VARCHAR2(50 )      -- 부모 코멘트의 작성자 닉네임
	, "GROUPNUM" NUMBER NOT NULL ENABLE   -- 코멘트 그룹 번호
	, "MATCHINGID" VARCHAR2(20 )      -- 매칭 ID
	, PRIMARY KEY ("COMMENTNUM")
	, CONSTRAINT "MC_USERID_FK" FOREIGN KEY ("USERID") REFERENCES "USERLIST" ("USERID") ON DELETE CASCADE ENABLE
	, CONSTRAINT "MB_BOARDNUM_FK" FOREIGN KEY ("BOARDNUM") REFERENCES "MATCHING_BOARD" ("BOARDNUM") ON DELETE CASCADE ENABLE
);

-- 1:1 화상 채팅 매칭 게시물 코멘트 번호 Sequence(commentNum)
CREATE SEQUENCE MC_COMMENTNUM_SEQ;

-- 1:1 화상 채팅 매칭 게시물 코멘트 그룹 Sequence(groupNum)
CREATE SEQUENCE MC_GROUPNUM_SEQ;


-- <------------------------- 공지 -------------------------->
-- 공지 게시판 TABLE
CREATE TABLE NOTICE_BOARD (
	"BOARDNUM" NUMBER   -- 게시물 번호
	, "USERID" VARCHAR2(20 ) NOT NULL ENABLE      -- 게시물 작성자
	, "NICKNAME" VARCHAR2(50 ) NOT NULL ENABLE   -- 게시물 작성자 닉네임
	, "TITLE" VARCHAR2(100 ) NOT NULL ENABLE      -- 제목
	, "CONTENTS" VARCHAR2(2000 ) NOT NULL ENABLE   -- 내용
	, "HITCOUNT" NUMBER DEFAULT 0      -- 조회수
	, "REGDATE" DATE DEFAULT SYSDATE   -- 최종 수정일
	, "STATUS" NUMBER DEFAULT 1 NOT NULL ENABLE   -- 공지 여부
	, CONSTRAINT "NB_STATUS_CK" CHECK (STATUS IN(0, 1)) ENABLE
	, PRIMARY KEY ("BOARDNUM")
	, CONSTRAINT "NB_FK" FOREIGN KEY ("USERID") REFERENCES "USERLIST" ("USERID") ON DELETE CASCADE ENABLE
);

-- 공지 게시판 Squence
CREATE SEQUENCE NOTICE_BOARD_SEQ;

-- 공지 게시물 코멘트 TABLE 
CREATE TABLE NOTICE_COMMENT (
	"COMMENTNUM" NUMBER   -- 코멘트 번호
	, "USERID" VARCHAR2(20 ) NOT NULL ENABLE    -- 코멘트 작성자
	, "NICKNAME" VARCHAR2(50 ) NOT NULL ENABLE   -- 코멘트 작성자 닉네임
	, "BOARDNUM" NUMBER NOT NULL ENABLE   -- 코멘트가 있는 게시물 번호
	, "COMMENTS" VARCHAR2(500 ) NOT NULL ENABLE   -- 코멘트 내용
	, "REGDATE" DATE DEFAULT SYSDATE   -- 최종 수정일
	, "PARENTID" VARCHAR2(20 )      -- 부모 코멘트의 작성자 ID
	, "PARENTNICK" VARCHAR2(50 )      -- 부모 코멘트의 작성자 닉네임
	, "GROUPNUM" NUMBER NOT NULL ENABLE   -- 코멘트 그룹 번호
	, PRIMARY KEY ("COMMENTNUM")
	, CONSTRAINT "NC_USERID_FK" FOREIGN KEY ("USERID") REFERENCES "USERLIST" ("USERID") ON DELETE CASCADE ENABLE
	, CONSTRAINT "NC_BOARDNUM_FK" FOREIGN KEY ("BOARDNUM") REFERENCES "NOTICE_BOARD" ("BOARDNUM") ON DELETE CASCADE ENABLE
);

-- 공지 게시물 코멘트 번호 Sequence(commentNum)
CREATE SEQUENCE NC_COMMENTNUM_SEQ;

-- 공지 게시물 코멘트 그룹 Sequence(groupNum)
CREATE SEQUENCE NC_GROUPNUM_SEQ;

-- <------------------------- 인터뷰 -------------------------->
-- 인터뷰 질문 리스트 TABLE
CREATE TABLE INTERVIEW_QUESTION (   
	"QUESTIONNUM" NUMBER PRIMARY KEY 
	, "QUESTION" VARCHAR2(200) NOT NULL
);

-- 저장되는 동영상 리스트 TABLE
CREATE TABLE INTERVIEW_DATA (   
	"DATANUM" NUMBER PRIMARY KEY
	, "USERID" VARCHAR2(20 ) NOT NULL
	, "QUESTIONNUM" NUMBER NOT NULL
	, "ANSWER" VARCHAR2(300)
	, "REGDATE" DATE NOT NULL 
	, "SAVEFILE" VARCHAR2(40 ) NOT NULL
	, "CONFIDENCE" NUMBER DEFAULT NULL
	, CONSTRAINT "ID_USER_FK" FOREIGN KEY ("USERID") REFERENCES "USERLIST" ("USERID") ON DELETE CASCADE ENABLE
	, CONSTRAINT "ID_QUESTION_FK" FOREIGN KEY ("QUESTIONNUM") REFERENCES "INTERVIEW_QUESTION" ("QUESTIONNUM") ON DELETE CASCADE ENABLE
);

CREATE SEQUENCE DATA_SEQ;

-- <------------------------- 영상 평가 -------------------------->
-- 영상 평가 게시판 TABLE
CREATE TABLE APPRAISE_BOARD (
	"BOARDNUM" NUMBER   -- 게시물 번호
	, "USERID" VARCHAR2(20 ) NOT NULL ENABLE      -- 게시물 작성자
	, "NICKNAME" VARCHAR2(50 ) NOT NULL ENABLE   -- 게시물 작성자 닉네임
	, "TITLE" VARCHAR2(100 ) NOT NULL ENABLE      -- 제목
	, "CONTENTS" VARCHAR2(2000 ) NOT NULL ENABLE   -- 내용
	, "HITCOUNT" NUMBER DEFAULT 0      -- 조회수
	, "REGDATE" DATE DEFAULT SYSDATE   -- 최종 수정일
	, "STATUS" NUMBER DEFAULT 1 NOT NULL ENABLE   -- 공지 여부
	, "DATANUM" NUMBER NOT NULL ENABLE   -- 모의 면접 영상 번호
	, CONSTRAINT "AB_STATUS_CK" CHECK (STATUS IN(0, 1)) ENABLE
	, PRIMARY KEY ("BOARDNUM")
	, CONSTRAINT "AB_FK" FOREIGN KEY ("USERID") REFERENCES "USERLIST" ("USERID") ON DELETE CASCADE ENABLE
);

-- 영상 평가 게시물 번호 Sequence
CREATE SEQUENCE APPRAISE_BOARD_SEQ;

-- 영상 평가 게시물 코멘트 TABLE 
CREATE TABLE APPRAISE_COMMENT (
	"COMMENTNUM" NUMBER   -- 코멘트 번호
	, "USERID" VARCHAR2(20 ) NOT NULL ENABLE    -- 코멘트 작성자
	, "NICKNAME" VARCHAR2(50 ) NOT NULL ENABLE   -- 코멘트 작성자 닉네임
	, "BOARDNUM" NUMBER NOT NULL ENABLE   -- 코멘트가 있는 게시물 번호
	, "COMMENTS" VARCHAR2(500 ) NOT NULL ENABLE   -- 코멘트 내용
	, "REGDATE" DATE DEFAULT SYSDATE   -- 최종 수정일
	, "PARENTID" VARCHAR2(20 )      -- 부모 코멘트의 작성자 ID
	, "PARENTNICK" VARCHAR2(50 )      -- 부모 코멘트의 작성자 닉네임
	, "GROUPNUM" NUMBER NOT NULL ENABLE   -- 코멘트 그룹 번호
	, "PRONUNCIATION" NUMBER DEFAULT 0   -- 발음 점수
	, "POSTURE" NUMBER DEFAULT 0      -- 자세 점수
	, "CONTENTS" NUMBER DEFAULT 0      -- 내용 점수
	, PRIMARY KEY ("COMMENTNUM")
	, CONSTRAINT "AB_USERID_FK" FOREIGN KEY ("USERID") REFERENCES "USERLIST" ("USERID") ON DELETE CASCADE ENABLE
	, CONSTRAINT "AB_BOARDNUM_FK" FOREIGN KEY ("BOARDNUM") REFERENCES "APPRAISE_BOARD" ("BOARDNUM") ON DELETE CASCADE ENABLE
);

-- 평가 게시물 코멘트 번호 Sequence(commentNum)
CREATE SEQUENCE AC_COMMENTNUM_SEQ;

-- 평가 게시물 코멘트 그룹 Sequence(groupNum)
CREATE SEQUENCE AC_GROUPNUM_SEQ;


-- <------------------------- 기타 -------------------------->
-- 예외 단어 TABLE
CREATE TABLE EXCEPTIONWORD (
	"WORD" VARCHAR2(30) NOT NULL ENABLE   -- 예외 단어
	, "STATUS" NUMBER DEFAULT 0 NOT NULL ENABLE   -- 예외 여부
	, CONSTRAINT "EXWORD_STATUS_CK" CHECK (STATUS IN(0, 1)) ENABLE
);


-- 방문자
CREATE TABLE VISITOR (
	"USERID" VARCHAR2(20) NOT NULL ENABLE
	, "REGDATE" DATE DEFAULT SYSDATE
);

-- <------------------------- 신고 -------------------------->
-- 신고 TABLE
CREATE TABLE REPORT (
	"REPORTNUM" NUMBER        -- 신고 번호
	, "REPORTER" VARCHAR2(20 ) NOT NULL ENABLE    -- 신고자
	, "REPORTEE" VARCHAR2(20 ) NOT NULL ENABLE    -- 신고 당한 대상자
	, "REPORT" VARCHAR2(2000 ) NOT NULL ENABLE    -- 신고 내용
	, "REASON" VARCHAR2(2000 ) NOT NULL ENABLE    -- 신고 이유
	, "REGDATE" DATE DEFAULT SYSDATE      -- 신고 날짜
	, "REPORTURL" VARCHAR2(300 ) NOT NULL ENABLE  -- 신고URL
	, "STATUS" NUMBER DEFAULT 0 NOT NULL ENABLE  -- 신고 인정 여부(인정되지 않은 상태 0, 신고 인정된 상태 1)
	, CONSTRAINT "REPORT_STATUS_CK" CHECK (STATUS IN(0, 1)) ENABLE
	, PRIMARY KEY ("REPORTNUM")
	, CONSTRAINT "REPORT_FK" FOREIGN KEY ("REPORTEE") REFERENCES "USERLIST" ("USERID") ON DELETE CASCADE ENABLE
);


-- 신고 번호 Sequence
CREATE SEQUENCE REPORT_SEQ;

-- 재제 TABLE
CREATE TABLE SANCTION (
	"SANCTIONNUM" NUMBER   -- 재제 번호
	, "USERID" VARCHAR2(20 ) NOT NULL ENABLE      -- 재제 대상자
	, "STARTTIME" DATE DEFAULT SYSDATE   -- 재제 시작일
	, "ENDTIME" DATE DEFAULT SYSDATE + 6    -- 재제 종료일
	, PRIMARY KEY ("SANCTIONNUM")
	, CONSTRAINT "SANCTION_FK" FOREIGN KEY ("USERID") REFERENCES "USERLIST" ("USERID") ON DELETE CASCADE ENABLE
);

-- 재제 번호 Sequence
CREATE SEQUENCE SANCTION_SEQ;

-- 쪽지 TABLE
CREATE TABLE MESSAGE (
	"MESSAGENUM" NUMBER       -- 쪽지 번호
	, "USERID" VARCHAR2(20 ) NOT NULL ENABLE      -- 보내는 이 ID
	, "NICKNAME" VARCHAR2(50 ) NOT NULL ENABLE    -- 보내는 이 닉네임
	, "RECEIVEID" VARCHAR2(20 ) NOT NULL ENABLE   -- 받는 이 ID
	, "MESSAGE" VARCHAR2(1000 ) NOT NULL ENABLE   -- 메세지 내용
	, "REGDATE" DATE DEFAULT SYSDATE      -- 보낸 날짜
	, "STATUS" NUMBER DEFAULT 0 NOT NULL ENABLE  -- 읽음 여부
	, CONSTRAINT "MSG_STATUS_CK" CHECK (STATUS IN(0, 1)) ENABLE
	, PRIMARY KEY ("MESSAGENUM")
	, CONSTRAINT "MESSAGE_FK" FOREIGN KEY ("RECEIVEID") REFERENCES "USERLIST" ("USERID") ON DELETE CASCADE ENABLE
);

--  쪽지 Sequence
CREATE SEQUENCE MESSAGE_SEQ;